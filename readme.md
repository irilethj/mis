# MIS

Простой веб-сервис по аналогии с Медицинской Информационной Системой (МИС).  

Сервис предоставляет:

- Регистрацию и авторизацию пользователей с ролями: **admin**, **doctor**, **patient**  
- CRUD операции с консультациями (прием к врачу)  
- Получение списка консультаций с фильтрацией по статусу, поиском по ФИО врача и пациента, сортировкой по дате создания  
- Смена статуса консультации: подтверждена, ожидает, начата, завершена, оплачена  

Стек: Django 4.2, Django REST Framework, PostgreSQL, Docker, Pytest, JWT авторизация  


## Установка и запуск

1. Клонируем репозиторий:

git clone https://github.com/irilethj/mis.git

2. Запускаем проект через Docker Compose:  
- docker-compose up --build  
- API доступен по адресу: http://localhost:8000/api/  
- Документация Swagger доступна по адресу: http://localhost:8000/api/docs/
3. Запуск тестов  
docker-compose exec web pytest -v  

## Авторизация и работа с API
Для использования API необходимо авторизоваться.  
Вы можете воспользоваться уже созданными тестовыми пользователями (создаются автоматически при запуске контейнера)  
или зарегистрировать нового пользователя вручную через endpoint:

POST /api/auth/register/  

После регистрации выполните вход для получения токенов JWT:  
POST /api/auth/login/  
Ответ будет содержать access и refresh токены:  
{
  "access": "eyJ0eXAiOiJKV1QiLCJh...",
  "refresh": "eyJhbGciOiJIUzI1NiIsInR..."
}

В Postman   
В каждом запросе к API добавьте в Headers:  
Authorization: Bearer <ваш_access_токен>  
Теперь можно выполнять запросы к любым защищённым эндпоинтам (например, /api/consultations/).  
  
В Swagger UI  
Перейдите по адресу:  
http://localhost:8000/api/docs/  
Нажмите Authorize (в правом верхнем углу) и введите токен
После авторизации вы сможете вызывать все доступные методы прямо из интерфейса Swagger.
